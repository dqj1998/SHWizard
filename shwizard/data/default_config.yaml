# LLM Configuration - New LLM_cpp backend (default)
llm:
  backend: "llmcpp"  # Options: "llmcpp", "ollama"
  model: "gemma-3-270m-Q8_0.gguf"
  # model_path is automatically determined based on platform:
  # macOS: ~/Library/Application Support/shwizard/models/
  # Linux: ~/.local/share/shwizard/models/
  # Windows: %LOCALAPPDATA%/shwizard/models/
  timeout: 60
  max_retries: 3
  auto_download: true
  
  # LLM_cpp specific settings
  n_ctx: 2048
  n_gpu_layers: -1  # Auto-detect (-1), or specify number of layers
  n_threads: 0      # Auto-detect (0), or specify number of threads
  temperature: 0.7
  top_p: 0.9
  top_k: 40
  repeat_penalty: 1.1
  
  # Model management
  download_source: "huggingface"
  fallback_models: 
    - "gemma-3-270m-Q8_0.gguf"
    - "gemma-2-2b-it-q4_k_m.gguf"
    - "qwen2-1.5b-instruct-q4_k_m.gguf"
  
  # Memory and performance settings
  use_mmap: true
  use_mlock: false  # Auto-detected based on platform
  
  # Cache management
  cache:
    max_size_mb: 10240  # 10GB default cache limit
    max_age_days: 30    # Remove models older than 30 days
    cleanup_on_startup: false

# Legacy Ollama configuration (for backward compatibility)
ollama:
  embedded: true
  auto_download: true
  base_url: "http://localhost:11435"
  model: "gemma3:270m"
  timeout: 60
  max_retries: 3
  
  download:
    models:
      - name: "gemma3:270m"
        size: "270MB"
        default: true
    install_path: "~/.shwizard/ollama"

safety:
  enabled: true
  confirm_high_risk: true
  warn_medium_risk: true
  info_low_risk: false
  dry_run_mode: false
  custom_rules_file: "~/.shwizard/custom_rules.yaml"
  block_high_risk: true

history:
  enabled: true
  max_entries: 10000
  database_path: "~/.shwizard/history.db"
  priority_search: true
  search_weight:
    frequency: 0.4
    recency: 0.3
    success_rate: 0.3

ui:
  color_enabled: true
  show_explanations: true
  verbose: false
  language: "auto"
  confirm_execution: true
  show_command_preview: true
  mouse_support: false
  mouse_auto_mode: true
  editing_mode: "emacs"  # options: emacs, vi
  completion:
    enabled: true
    case_insensitive: true
    llm_enabled: true
    style: "readline_like"  # options: readline_like, multi_column, toolbar
    complete_while_typing: false
    complete_in_thread: true
    max_candidates: 50

context:
  collect_env: true
  collect_cwd: true
  collect_os_info: true
  collect_installed_tools: false

logging:
  enabled: true
  level: "INFO"
  file: "~/.shwizard/shwizard.log"
  max_size_mb: 10
  backup_count: 3
